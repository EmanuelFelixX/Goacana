{% extends 'base/base.html' %}
{% load static %}
{% block 'header' %}
<link rel="stylesheet" href="{% static 'CSS/editordecadarpio.css' %}">
{% endblock %}

{% block 'content' %}
    <div class="container vheight">
        <h2 class="mb-4 titulo">Editor de Cardápio</h2>

        <!-- Formulário-->
        <form id="form-cardapio" class="mb-4" method="post">
        <div class="row g-3">
            <div class="col-md-4">
            <input type="text" class="form-control" id="nome" placeholder="Nome do prato" required>
            </div>
            <div class="col-md-4">
            <input type="text" class="form-control" id="descricao" placeholder="Descrição" required>
            </div>
            <div class="col-md-2">
            <input type="number" class="form-control" id="preco" step="0.01" placeholder="Preço" required>
            </div>
            <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">Adicionar</button>
            </div>
        </div>
        </form>

        <!-- Lista de itens -->
        <div id="lista-cardapio" class="row g-3"></div>
    </div>

    <script>
        const form = document.getElementById('form-cardapio');
        const lista = document.getElementById('lista-cardapio');

        form.addEventListener('submit', function (e) {
        e.preventDefault();

        const nome = document.getElementById('nome').value;
        const descricao = document.getElementById('descricao').value;
        const preco = document.getElementById('preco').value;

        const card = document.createElement('div');
        card.className = 'col-md-4';
        card.innerHTML = `
            <div class="card">
            <div class="card-body">
                <h5 class="card-title">${nome}</h5>
                <p class="card-text">${descricao}</p>
                <p><strong>R$ ${parseFloat(preco).toFixed(2)}</strong></p>
                <button class="btn btn-danger btn-sm remover">Remover</button>
            </div>
            </div>
        `;

        lista.appendChild(card);

        // limpa campos
        form.reset();
        });

        // remover item
        lista.addEventListener('click', function (e) {
        if (e.target.classList.contains('remover')) {
            e.target.closest('.col-md-4').remove();
        }
        });
    </script>
{% endblock %}